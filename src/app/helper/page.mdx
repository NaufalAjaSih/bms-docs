# Helper — Standar Penulisan & Penggunaan

## 1. Pengantar Helper

Helper adalah kumpulan fungsi kecil yang dapat digunakan **di seluruh aplikasi**, mulai dari Controller, Service, Model, hingga Blade.

Pada standar ini, Helper digunakan **khusus untuk fungsi kecil yang bersifat global**, bukan untuk logika bisnis atau proses kompleks.

Tujuan utama penggunaan Helper:

- Menyediakan fungsi utilitas kecil yang sering digunakan.
- Menghindari duplikasi kode.
- Membuat kode lebih clean dan mudah dibaca.

Helper **bukan** pengganti Service atau Trait.

## 2. Prinsip Dasar Helper

1. **Helper hanya untuk fungsi global & kecil**
   Contoh: format angka, tanggal, pemotongan teks.

2. **Helper tidak boleh berisi business logic**
   Semua proses inti harus tetap ada di service.

3. **Helper tidak melakukan query database**
   Query = tugas Service atau Repository.

4. **Helper sebaiknya pure function**
   Tanpa bergantung pada session, request, atau global state.

5. **Nama helper harus deskriptif dan mudah dipahami**

6. **Static class helper tidak perlu autoload files**
   Jika helper berbentuk class seperti `ResponseHelper`, dia otomatis di-autoload via PSR-4 Laravel.

## 3. Lokasi Helper

Semua helper disimpan di:

```
app/Helpers/
```

Struktur contoh:

```
app/Helpers/
    ResponseHelper.php
    FormatHelper.php
    TextHelper.php
```

## 4. Jenis Helper

Laravel mendukung dua jenis gaya helper:

#### A. Helper Berbasis Class (Static Method)

Contoh: `ResponseHelper`, `LogHelper`

- Tidak perlu registrasi autoload
- Bersih
- Mengikuti standar OOP

File: `app/Helpers/ResponseHelper.php`

```php
<?php

namespace App\Helpers;

class ResponseHelper
{
    public static function jsonSuccess($data = null, $message = 'Success', $status = 200)
    {
        return response()->json([
            'status' => 'success',
            'message' => $message,
            'data' => $data,
        ], $status);
    }

    public static function jsonError($message = 'Error', $status = 400, $errors = [])
    {
        return response()->json([
            'status' => 'error',
            'message' => $message,
            'errors' => $errors,
        ], $status);
    }
}
```

> Helper tipe class ini **otomatis terload** sesuai autoload PSR-4 Laravel.
> **Tidak perlu daftar ke composer.json**.

Pemanggilan:

```php
ResponseHelper::jsonSuccess($data);
```

---

#### B. Helper Berbasis Fungsi Global

Digunakan untuk fungsi kecil yang ingin dipanggil langsung tanpa class.

File: `app/Helpers/FormatHelper.php`

```php
<?php

if (! function_exists('format_rupiah')) {
    function format_rupiah($number)
    {
        return number_format($number, 0, ',', '.');
    }
}
```

Jika menggunakan helper function global seperti ini, maka harus:

#### Registrasi di composer.json

```json
"autoload": {
    "files": [
        "app/Helpers/FormatHelper.php",
        "app/Helpers/TextHelper.php"
    ]
}
```

Lalu jalankan:

```
composer dump-autoload
```

Karena fungsi global tidak masuk PSR-4 autoloading.

## 5. Aturan Penting Helper

| Aturan                              | Penjelasan                            |
| ----------------------------------- | ------------------------------------- |
| ✔ Helper function kecil & reusable  | Agar tidak duplikasi kode             |
| ✔ Static class helper → auto load   | Tidak perlu daftar composer           |
| ✔ Function helper → wajib daftar    | Harus ditambahkan ke `autoload.files` |
| ✔ Tidak mengandung business logic   | Business logic = service              |
| ✔ Tidak ada query database          | Query = service / repository          |
| ✔ Nama deskriptif & clean           | Mudah dipahami developer lain         |
| ❌ Tidak menangani upload file      | Gunakan Trait                         |
| ❌ Tidak mengakses request langsung | Harus pure function                   |

## 6. Kapan Menggunakan Helper vs Trait vs Service?

| Kebutuhan                                | Gunakan      | Penjelasan               |
| ---------------------------------------- | ------------ | ------------------------ |
| Format angka, tanggal, teks              | Helper       | Fungsi kecil global      |
| Upload file, generator, utility teknis   | Trait        | Reusable logic OOP       |
| Business logic (CRUD, transaksi, aturan) | Service      | Inti proses aplikasi     |
| Query database                           | Service/Repo | Terstruktur & terkontrol |

## 7. Ringkasan

- Helper digunakan hanya untuk fungsi kecil yang sering dipakai ulang.
- **Static class helper tidak perlu registrasi** ke autoload.
- **Global function helper wajib registrasi** ke autoload.
- Helper tidak boleh berisi logic bisnis atau query database.
- Service tetap menjadi pusat business logic utama.
